<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Visualizing with meow: Comparing Item Exposure Control Methods • meow</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="meow-viz_files/libs/quarto-html/popper.min.js"></script><script src="meow-viz_files/libs/quarto-html/tippy.umd.min.js"></script><link href="meow-viz_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="meow-viz_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Visualizing with meow: Comparing Item Exposure Control Methods">
<meta property="og:image" content="http://klintkanopka.com/meow/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">meow</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/data-loaders.html">Data Loaders</a></li>
    <li><a class="dropdown-item" href="../articles/item-selection.html">Item Selection Functions</a></li>
    <li><a class="dropdown-item" href="../articles/parameter-update.html">Parameter Update Functions</a></li>
    <li><a class="dropdown-item" href="../articles/meow-viz.html">Visualizing with `meow`: Comparing Item Exposure Control Methods</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/klintkanopka/meow/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Visualizing with <code>meow</code>: Comparing Item Exposure Control Methods</h1>




      <small class="dont-index">Source: <a href="https://github.com/klintkanopka/meow/blob/main/vignettes/meow-viz.qmd" class="external-link"><code>vignettes/meow-viz.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <p>This vignette is going to take you through conducting two simulations and then comparing the results with some visualizations. We’ll use <code>ggplot2</code> to make the visuals here, but I’m not going to tell you how to live. The other package you’ll need, obviously, is <code>meow</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># remotes::install_github("klintkanopka/meow")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://klintkanopka.com/meow/">meow</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span></code></pre></div>
<section class="section level2"><h2 id="no-exposure-controls">No Exposure Controls<a class="anchor" aria-label="anchor" href="#no-exposure-controls"></a>
</h2>
<p>To do a simulation with no exposure controls, we’ll use the built-in item selection method, <code><a href="../reference/select_max_info.html">select_max_info()</a></code>. To conduct a sample simulation using data generated from a 1PL and MLE based updates of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><mi>θ</mi><mo accent="true">̂</mo></mover><annotation encoding="application/x-tex">\hat{\theta}</annotation></semantics></math>, you can run:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out_none</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/meow.html">meow</a></span><span class="op">(</span></span>
<span>  select_fun <span class="op">=</span> <span class="va">select_max_info</span>,</span>
<span>  update_fun <span class="op">=</span> <span class="va">update_theta_mle</span>,</span>
<span>  data_loader <span class="op">=</span> <span class="va">data_simple_1pl</span>,</span>
<span>  init <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fix <span class="op">=</span> <span class="st">'item'</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Let’s look at some common ways you might want to visualize the results of your simulations. One thing to note, is that the last line of <code>out_info$results</code> is going to have the final bias values for each parameter in the simulation, so we’ll focus on examining their evolution over time.</p>
<section class="level2"><h3 id="root-mean-squared-error-rmse-of-person-abilities">Root Mean Squared Error (RMSE) of Person Abilities<a class="anchor" aria-label="anchor" href="#root-mean-squared-error-rmse-of-person-abilities"></a>
</h3>
<p>First, we’ll extract just the results dataframe. Since we’ll be combining this with an exposure control method later, I’ll also label it:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results_none</span> <span class="op">&lt;-</span> <span class="va">out_none</span><span class="op">$</span><span class="va">results</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>control <span class="op">=</span> <span class="st">'None'</span><span class="op">)</span></span></code></pre></div>
<p>Next we want to extract the bias in the person abilities. We can also grab the current estimates if we like. Just change the suffix you select from <code>_bias</code> to <code>_est</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results_none</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">iter</span>, <span class="va">control</span>, <span class="fu">starts_with</span><span class="op">(</span><span class="st">'pers_'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">iter</span>, <span class="va">control</span>, <span class="fu">ends_with</span><span class="op">(</span><span class="st">'_bias'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span><span class="fu">ends_with</span><span class="op">(</span><span class="st">'_bias'</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">'person'</span>, values_to <span class="op">=</span> <span class="st">'bias'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">iter</span>, <span class="va">control</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>rmse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">bias</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">'drop'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">iter</span>, y <span class="op">=</span> <span class="va">rmse</span>, color <span class="op">=</span> <span class="va">control</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">'Number of Items Delivered'</span>,</span>
<span>    y <span class="op">=</span> <span class="st">'RMSE for Person Ability'</span>,</span>
<span>    color <span class="op">=</span> <span class="st">'Exposure Controls'</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">'bottom'</span><span class="op">)</span></span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="img/meow-viz-01.png"></p>
<figcaption>Figure 1</figcaption></figure>
</div>
<p>This is more useful when comparing across methods, though. Now let’s take a look at how individual parameter trajectories evolve over time. Again, we’ll track the bias.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results_none</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">iter</span>, <span class="va">control</span>, <span class="fu">starts_with</span><span class="op">(</span><span class="st">'pers_'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">iter</span>, <span class="va">control</span>, <span class="fu">ends_with</span><span class="op">(</span><span class="st">'_bias'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span><span class="fu">ends_with</span><span class="op">(</span><span class="st">'_bias'</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">'person'</span>, values_to <span class="op">=</span> <span class="st">'bias'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">iter</span>, y <span class="op">=</span> <span class="va">bias</span>, color <span class="op">=</span> <span class="va">control</span>, group<span class="op">=</span><span class="va">person</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>alpha<span class="op">=</span><span class="fl">0.4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">'Number of Items Delivered'</span>,</span>
<span>    y <span class="op">=</span> <span class="st">'Bias in Estimated Person Ability'</span>,</span>
<span>    color <span class="op">=</span> <span class="st">'Exposure Controls'</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">'bottom'</span><span class="op">)</span></span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="img/meow-viz-02.png"></p>
<figcaption>Figure 2</figcaption></figure>
</div>
</section></section><section class="section level2"><h2 id="restricting-item-exposure">Restricting Item Exposure<a class="anchor" aria-label="anchor" href="#restricting-item-exposure"></a>
</h2>
<p>This is quite similar to the unrestricted case, it just involves two additional steps and an additional parameter that needs to get passed to the selection function. First we need to compute exposure rates for all administered items, and then second, we need to drop potential items that are above the current exposure rate.</p>
<p>The diagonal of the adjacency matrix has the exposure counts, so from that we quickly compute exposure rates and then filter potential solutions based upon that.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">select_rest</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span></span>
<span>  <span class="va">pers</span>,</span>
<span>  <span class="va">item</span>,</span>
<span>  <span class="va">resp</span>,</span>
<span>  <span class="va">resp_cur</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">adj_mat</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">r_max</span> <span class="op">=</span> <span class="fl">0.025</span></span>
<span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">resp_cur</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">resp</span><span class="op">[</span><span class="va">resp</span><span class="op">$</span><span class="va">item</span> <span class="op">&lt;=</span> <span class="fl">5</span>, <span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">r_obs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      item <span class="op">=</span> <span class="va">item</span><span class="op">$</span><span class="va">item</span>, </span>
<span>      r_obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="va">adj_mat</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="va">adj_mat</span><span class="op">)</span><span class="op">)</span>, row.names<span class="op">=</span><span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="va">resp_new</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">anti_join</a></span><span class="op">(</span></span>
<span>      <span class="va">resp</span>,</span>
<span>      <span class="va">resp_cur</span>,</span>
<span>      by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'id'</span>, <span class="st">'item'</span>, <span class="st">'resp'</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">pers</span>, by <span class="op">=</span> <span class="st">'id'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">item</span>, by <span class="op">=</span> <span class="st">'item'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">r_obs</span>, by<span class="op">=</span><span class="st">'item'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">r_obs</span> <span class="op">&lt;</span> <span class="va">r_max</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>        info <span class="op">=</span> <span class="va">.data</span><span class="op">$</span><span class="va">a</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span></span>
<span>          <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">a</span> <span class="op">*</span> <span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">theta</span> <span class="op">-</span> <span class="va">.data</span><span class="op">$</span><span class="va">b</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span></span>
<span>          <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">a</span> <span class="op">*</span> <span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">theta</span> <span class="op">-</span> <span class="va">.data</span><span class="op">$</span><span class="va">b</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_max</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">info</span>, n <span class="op">=</span> <span class="fl">1</span>, by <span class="op">=</span> <span class="va">.data</span><span class="op">$</span><span class="va">id</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">id</span>, <span class="va">.data</span><span class="op">$</span><span class="va">item</span>, <span class="va">.data</span><span class="op">$</span><span class="va">resp</span><span class="op">)</span></span>
<span>    <span class="va">resp_new</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">resp_cur</span>, <span class="va">resp_new</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">resp_new</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>To pass an exposure rate to the item selection function that’s different from the default value, we can conduct a simulation that looks like this:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out_rest</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/meow.html">meow</a></span><span class="op">(</span></span>
<span>  select_fun <span class="op">=</span> <span class="va">select_rest</span>,</span>
<span>  update_fun <span class="op">=</span> <span class="va">update_theta_mle</span>,</span>
<span>  data_loader <span class="op">=</span> <span class="va">data_simple_1pl</span>,</span>
<span>  init <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fix <span class="op">=</span> <span class="st">'item'</span>,</span>
<span>  select_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>r_max <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Now let’s say we want to compare the RMSE in estimated abilities over time for the two methods. We can bind together the rows for our two outputs (making sure that we’ve labeled our control method) and plot as before:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results_rest</span> <span class="op">&lt;-</span> <span class="va">out_rest</span><span class="op">$</span><span class="va">results</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>control <span class="op">=</span> <span class="st">'Restricted'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">bind_rows</span><span class="op">(</span></span>
<span>  <span class="va">results_none</span>,</span>
<span>  <span class="va">results_rest</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">iter</span>, <span class="va">control</span>, <span class="fu">starts_with</span><span class="op">(</span><span class="st">'pers_'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">iter</span>, <span class="va">control</span>, <span class="fu">ends_with</span><span class="op">(</span><span class="st">'_bias'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span><span class="fu">ends_with</span><span class="op">(</span><span class="st">'_bias'</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">'person'</span>, values_to <span class="op">=</span> <span class="st">'bias'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">iter</span>, <span class="va">control</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>rmse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">bias</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">'drop'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">iter</span>, y <span class="op">=</span> <span class="va">rmse</span>, color <span class="op">=</span> <span class="va">control</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">'Number of Items Delivered'</span>,</span>
<span>    y <span class="op">=</span> <span class="st">'RMSE for Person Ability'</span>,</span>
<span>    color <span class="op">=</span> <span class="st">'Exposure Controls'</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">'bottom'</span><span class="op">)</span></span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="img/meow-viz-03.png"></p>
<figcaption>Figure 3</figcaption></figure>
</div>
<p>Here we can see that, as it turns out, restricting item exposure doesn’t hurt our RMSE too much. What about the individual parameter trajectories? Here we’ll separate the two using faceting. We’ll also only look at these trajectories over the first twenty items.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">iter</span>, <span class="va">control</span>, <span class="fu">starts_with</span><span class="op">(</span><span class="st">'pers_'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">iter</span>, <span class="va">control</span>, <span class="fu">ends_with</span><span class="op">(</span><span class="st">'_bias'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span><span class="fu">ends_with</span><span class="op">(</span><span class="st">'_bias'</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">'person'</span>, values_to <span class="op">=</span> <span class="st">'bias'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">iter</span> <span class="op">&lt;=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">iter</span>, y <span class="op">=</span> <span class="va">bias</span>, color <span class="op">=</span> <span class="va">control</span>, group<span class="op">=</span><span class="va">person</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>alpha<span class="op">=</span><span class="fl">0.4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">'Number of Items Delivered'</span>,</span>
<span>    y <span class="op">=</span> <span class="st">'Bias in Estimated Person Ability'</span>,</span>
<span>    color <span class="op">=</span> <span class="st">'Exposure Controls'</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_grid</span><span class="op">(</span><span class="va">control</span> <span class="op">~</span> <span class="va">.</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">'bottom'</span><span class="op">)</span></span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="img/meow-viz-04.png"></p>
<figcaption>Figure 4</figcaption></figure>
</div>
<p>Early on, the trajectories are identical because exposure controls haven’t yet kicked in. We didn’t see much difference in the RMSE plot, and here we continue to not see much difference.</p>
</section><section class="section level2"><h2 id="visualizing-the-adjacency-matrix">Visualizing the Adjacency Matrix<a class="anchor" aria-label="anchor" href="#visualizing-the-adjacency-matrix"></a>
</h2>
<p>One thing you can also do is create interactive visualizations of the evolution of the adjacency matrix. This is really helpful for getting a sense of how your exposure controls or selection algorithms might be impacting item utilization. You’ll need two packages to do this, <code>statnet</code> for creating the network objects and <code>ndtv</code> for creating the dynamic visuals.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://statnet.org" class="external-link">statnet</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/statnet/ndtv" class="external-link">ndtv</a></span><span class="op">)</span></span></code></pre></div>
<p>The first thing you’ll need to do is create a network list. We do this by calling the <code>network()</code> function from <code>statnet</code> onto each object in the adjacency matrix list. The output from <code>meow</code> is formatted to make this as easy as a single <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">info_nets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">out_info</span><span class="op">$</span><span class="va">adj_mats</span>, <span class="va">network</span><span class="op">)</span></span></code></pre></div>
<p>Next we collapse these into a single dynamic network object. We do this with a call to <code>networkDynamic()</code>. Again, our output is structured to make just visualizing these as simple as possible.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dyn_info</span> <span class="op">&lt;-</span> <span class="fu">networkDynamic</span><span class="op">(</span>network.list <span class="op">=</span> <span class="va">info_nets</span><span class="op">)</span></span></code></pre></div>
<p>Finally, we render the movie. This will open a browser window with an interactive movie. Here you can click on specific nodes to get more information about them or follow them over time, move forward and backward through time, and also zoom in and out. Here I’ve also added some information about item difficulty. Items with difficulties below zero (easier) are colored blue, while harder items are colored red. Additionally, the size of the nodes is larger the farther they are from zero. This makes it quick to identify the easiest and hardest items as the largest nodes. A good thing to do is click on the hardest item (the largest red node) and see what it gets connected to over time.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">render.d3movie</span><span class="op">(</span></span>
<span>  <span class="va">dyn_info</span>,</span>
<span>  usearrows <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  main <span class="op">=</span> <span class="st">'Maximum Fisher Information Item Selection'</span>,</span>
<span>  vertex.cex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">out_info</span><span class="op">$</span><span class="va">item</span><span class="op">$</span><span class="va">b</span><span class="op">)</span>,</span>
<span>  vertex.col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">out_info</span><span class="op">$</span><span class="va">item</span><span class="op">$</span><span class="va">b</span> <span class="op">&lt;</span> <span class="fl">0</span>, <span class="st">'dodgerblue'</span>, <span class="st">'tomato'</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Klint Kanopka, Sophia Deng.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
